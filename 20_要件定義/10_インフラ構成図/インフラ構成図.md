# インフラ構成図
## インフラ構成図
```uml
@startuml
!include <awslib/AWSCommon>
!include <awslib/Groups/Generic>
!include <awslib/Groups/AWSCloud>
!include <awslib/Groups/VPC>
!include <awslib/Groups/PublicSubnet>
!include <awslib/Groups/PrivateSubnet>
!include <awslib/NetworkingContentDelivery/ElasticLoadBalancingApplicationLoadBalancer>

!include <awslib/NetworkingContentDelivery/VPCInternetGateway>

!include <awslib/Compute/EC2>

!include <awslib/Containers/ElasticContainerRegistry>
!include <awslib/Containers/ElasticContainerService>
!include <awslib/Containers/Fargate>

skinparam linetype ortho

AWSCloudGroup(cloud) {

    VPCGroup(vpc, "VPC"){
        VPCInternetGateway(ig, "Internet Gateway", "chigirh-cicd-igw")
        PublicSubnetGroup(subnet1, "Public Subnet1"){
            ElasticLoadBalancingApplicationLoadBalancer(alb,"Application Load Balancer","cicd-handson-alb") #Transparent

            EC2(ec2_1, "Judge0 Service", "chigirh-judge0-api-ec2") #Transparent

            GenericGroup(components1, "training-liubang-service") #Transparent {
                rectangle "$FargateIMG()\nAWS Fargate" as fargate #Transparent
            }
        }

        ElasticContainerService(ecs, "trainning-liubang-cluster", "") #Transparent
        ElasticContainerRegistry(ecr, "trainning-liubang-repository", "") #Transparent
        
        PublicSubnetGroup(subnet2, "Public Subnet2"){

        }        
    }
}

' layout
ig -[hidden]r- subnet1
subnet1 -[hidden]d- subnet2
subnet1 -[hidden]r- ecs
ecs -d-> ecr



@enduml
```